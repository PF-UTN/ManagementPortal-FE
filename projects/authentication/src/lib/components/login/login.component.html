<div class="container d-flex flex-column justify-content-center align-items-center p-3">
    <div class="row">
        <span class="material-icons custom-account-icon">
            account_circle
        </span>
    </div>
    <div class="mb-3">
        <mp-title [label]="'INICIO DE SESIÓN'" [color]="'#65558F'" [fontSize]="'1.2em'"></mp-title>
    </div>
    <div class="mb-4">
        <mp-subtitle [label]="'¿No tienes cuenta aún?'" [color]="'#727073'" [fontSize]="'1em'"></mp-subtitle>
        <mp-clickable-title [label]="' Regístrate'" [color]="'#65558F'" [fontSize]="'1em'" (clicked)="navigateToRegister()"></mp-clickable-title>
    </div>
    <form [formGroup]="loginForm">    
        <div class="row">
            <div class="col d-flex align-items-center justify-content-center mt-1 ">
                <mat-form-field class="custom-size" appearance="outline">
                    <mat-label>Email</mat-label>
                    <input type="email" matInput formControlName="email" placeholder="Ej. pat@example.com">
                    <button matSuffix mat-icon-button aria-label="Clear" (click)="loginForm.get('email')?.reset()">
                        <mat-icon>close</mat-icon>
                    </button>
                    <mat-hint *ngIf="loginForm.get('email')?.hasError('required') && loginForm.get('email')?.touched" class="error-message" >Email es requerido</mat-hint>
                    <mat-hint *ngIf="loginForm.get('email')?.hasError('email')">Email no válido</mat-hint>
                </mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col d-flex align-items-center justify-content-center mt-1">
                <mat-form-field class="custom-size" appearance="outline">
                    <mat-label>Contraseña</mat-label>
                    <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
                    <button mat-icon-button matSuffix (click)="togglePasswordVisibility()"
                      [attr.aria-label]="hidePassword ? 'Mostrar contraseña' : 'Ocultar contraseña'"
                      [attr.aria-pressed]="!hidePassword">
                      <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                    <mat-hint *ngIf="loginForm.get('password')?.hasError('required') && loginForm.get('password')?.touched" class="error-message">Contraseña es requerida</mat-hint>
                  </mat-form-field>
            </div>
        </div>
        <p *ngIf="errorMessage" class="error-message d-flex   justify-content-center align-items-center">{{ errorMessage }}</p>
        <div class="d-flex align-items-center justify-content-center">
            <mp-button label="Ingresar" color="primary" type="submit" [disabled]="loginForm.invalid"  (clicked)="onSubmit()" ></mp-button>
        </div>
    </form>
    <div class="mb-4 mt-3">
        <mp-clickable-title [label]="' Olvidé mi contraseña'" [color]="'#65558F'" [fontSize]="'1em'" (clicked)="navigateToRegister()"></mp-clickable-title>
    </div>
</div>