<div class="background-container justify-content-center align-items-center d-flex">
<div class="container justify-content-center align-items-center d-flex flex-column">
    <div class="row">
        <span class="material-icons custom-account-icon">
            account_circle
        </span>
    </div>
    <div class="mb-3">
        <mp-title> INICIO DE SESIÓN </mp-title>
    </div>
    <div class="mb-4">
        <mp-subtitle> ¿No tienes cuenta aún? <a href="/signup" class="text-decoration-none"> Regístrate</a></mp-subtitle>
    </div>
    <form [formGroup]="loginForm">     
        <div class="row">
            <div class="col d-flex align-items-center justify-content-center mt-1 ">
                <mat-form-field class="custom-size" appearance="outline">
                    <mat-label>Email</mat-label>
                    <input type="email" matInput formControlName="email" placeholder="Ej. pat@example.com">
                    <button type="button" matSuffix mat-icon-button aria-label="Clear" (click)="loginForm.get('email')?.reset()">
                        <mat-icon>close</mat-icon>
                    </button>
                    <mat-error *ngIf="loginForm.get('email')?.hasError('required') && loginForm.get('email')?.touched">Email es requerido</mat-error>
                    <mat-error *ngIf="loginForm.get('email')?.hasError('invalidEmail') && !loginForm.get('email')?.hasError('required') && loginForm.get('email')?.touched">Email no válido</mat-error>
                </mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col d-flex align-items-center justify-content-center mt-1">
                <mat-form-field class="custom-size" appearance="outline">
                    <mat-label>Contraseña</mat-label>
                    <input matInput [type]="hidePassword() ? 'password' : 'text'" formControlName="password">
                    <button type="button" mat-icon-button matSuffix (click)="togglePasswordVisibility()"
                      [attr.aria-label]="hidePassword() ? 'Mostrar contraseña' : 'Ocultar contraseña'"
                      [attr.aria-pressed]="!hidePassword()">
                      <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                    <mat-error *ngIf="loginForm.get('password')?.hasError('required') && loginForm.get('password')?.touched">Contraseña es requerida</mat-error>
                  </mat-form-field>
            </div>
        </div>
        <p *ngIf="errorMessage" class="error-message d-flex justify-content-center align-items-center">{{ errorMessage }}</p>
        <div class="d-flex align-items-center justify-content-center">
            <mp-button type="primary" [disabled]="loginForm.invalid || isSubmitting()"  (onClick)="onSubmit()" >{{ isSubmitting() ? 'Ingresando...' : 'Ingresar' }}</mp-button>
        </div>
    </form>
    <div class="error-container">
        <mp-subtitle><a href="/" class="text-decoration-none"> Olvidé mi contraseña</a></mp-subtitle>
    </div>
</div>
</div>