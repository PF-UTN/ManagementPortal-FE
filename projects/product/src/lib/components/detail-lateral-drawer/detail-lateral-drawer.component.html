<ng-container *ngIf="isLoading(); else loaded">
  <mp-loading></mp-loading>
</ng-container>

<ng-template #loaded>
  <ng-container *ngIf="!error(); else errorContent">
    <ng-container *ngIf="data() as product">
      <div class="container py-4">
        <div class="container__body py-4">
          <img
            class="container__image"
            mat-card-image
            [src]="
              product.imageUrl ??
              'https://material.angular.dev/assets/img/examples/shiba2.jpg'
            "
            alt="Producto"
          />

          <hr />
          <div class="row mb-2 mt-2 justify-content-center">
            <div class="col-12 text-center">
              <strong>Nombre</strong>
              <p class="mb-2 mt-1 text-color">{{ product.name }}</p>
            </div>
          </div>
          <div class="row mb-2 justify-content-center">
            <div class="col-12 mb-2 mt-1 text-center">
              <mat-slide-toggle
                [checked]="product.enabled"
                disabled
                color="primary"
              >
                {{ product.enabled ? 'Activo' : 'En Pausa' }}
              </mat-slide-toggle>
            </div>
          </div>
          <div class="row mb-2 justify-content-center">
            <div class="col-12 mb-2 mt-1 text-center">
              <strong>Descripción</strong>
              <p class="mb-2 text-secondary">{{ product.description }}</p>
            </div>
          </div>

          <div class="row mb-2 justify-content-center">
            <div class="col-6 mt-1 text-center">
              <strong>Categoría</strong>
              <p class="mb-1 text-secondary">{{ product.category.name }}</p>
            </div>
            <div class="col-6 mt-1 text-center">
              <strong>Peso</strong>
              <p class="mb-1 text-secondary">{{ product.weight }} kg</p>
            </div>
          </div>

          <hr />

          <div class="row mb-2 text-center">
            <div class="col-4">
              <strong>Disponible</strong>
              <br />
              {{ product.stock.quantityAvailable }}
            </div>
            <div class="col-4">
              <strong>Pedido</strong>
              <br />
              {{ product.stock.quantityOrdered }}
            </div>
            <div class="col-4">
              <strong>Reservado</strong>
              <br />
              {{ product.stock.quantityReserved }}
            </div>
          </div>

          <hr />

          <div class="row mb-2 text-center">
            <span><strong>Proveedor</strong></span>
            <div class="col-12 mb-1 text-center">
              <span>{{ product.supplier.businessName }}</span>
              <div>
                <span class="text-muted text-secondary">{{
                  product.supplier.phone
                }}</span>
                <span class="text-muted mx-2 text-secondary">|</span>
                <span class="text-muted text-secondary">{{
                  product.supplier.email
                }}</span>
              </div>
            </div>
          </div>

          <hr />

          <div class="row mb-3">
            <div class="col-12 text-center">
              <span class="price-highlight">
                {{ product.price | currency: 'ARS' : 'symbol' : '1.2-2' }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </ng-container>

  <ng-template #errorContent>
    <div class="container py-3">
      <p class="text-danger">{{ error() }}</p>
    </div>
  </ng-template>
</ng-template>
